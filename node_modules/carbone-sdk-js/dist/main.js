var f=Object.defineProperty,S=Object.defineProperties,A=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var m=(o,r,a)=>r in o?f(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a,l=(o,r)=>{for(var a in r||(r={}))y.call(r,a)&&m(o,a,r[a]);if(b)for(var a of b(r))H.call(r,a)&&m(o,a,r[a]);return o},v=(o,r)=>S(o,C(r));var R=(o,r)=>{for(var a in r)f(o,a,{get:r[a],enumerable:!0})},U=(o,r,a,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of K(r))!y.call(o,t)&&t!==a&&f(o,t,{get:()=>r[t],enumerable:!(e=A(r,t))||e.enumerable});return o};var x=o=>U(f({},"__esModule",{value:!0}),o);var j={};R(j,{default:()=>V});module.exports=x(j);var w=function(o){let r={apiUrl:"https://api.carbone.io",accessToken:o,apiVersion:4,apiHeaders:{}},a=function(e,t,n){return fetch("".concat(r.apiUrl).concat(t),v(l({method:e},n!=null&&n.body?{body:n.body}:{}),{headers:l(l({"carbone-version":r.apiVersion,Authorization:"Bearer "+r.accessToken},n!=null&&n.headers?n.headers:{}),r!=null&&r.apiHeaders?r.apiHeaders:{})}))};return{setApiHeaders:function(e){e&&typeof e=="object"&&(r.apiHeaders=e)},getApiHeaders:function(){return r.apiHeaders},getAccessToken:function(){return r.accessToken},setAccessToken:function(e){r.accessToken=e},getApiVersion:function(){return r.apiVersion},setApiVersion:function(e){r.apiVersion=e},getApiUrl:function(){return r.apiUrl},setApiUrl:function(e){r.apiUrl=e},addTemplate:async function(e,t=""){var n=new FormData;if(!e)throw new Error("Carbone SDK addTemplate error: the file argument is not valid.");return n.append("payload",t),n.append("template",e),await(await a("post","/template",{body:n})).json()},deleteTemplate:async function(e){if(!e)throw new Error("Carbone SDK deleteTemplate error: the templateId argument is not valid.");return await(await a("delete","/template/".concat(e))).json()},getTemplate:async function(e,t="blob"){if(!e)throw new Error("Carbone SDK getTemplate error: the templateId argument is not valid.");if(["blob","text"].indexOf(t)===-1)throw new Error("Carbone SDK getTemplate error: the responseType argument is not valid.");return await(await a("get","/template/".concat(e)))[t]()},renderReport:async function(e,t){if(!e)throw new Error("Carbone SDK renderReport error: the templateId argument is not valid.");if(!t)throw new Error("Carbone SDK renderReport error: the data argument is not valid.");return await(await a("post","/render/".concat(e),{body:JSON.stringify(t),headers:{"Content-type":"application/json"}})).json()},getReport:async function(e,t="blob"){if(!e)throw new Error("Carbone SDK getReport error: the renderId argument is not valid.");if(["blob","text"].indexOf(t)===-1)throw new Error("Carbone SDK getReport error: the responseType argument is not valid.");let n=await a("get","/render/".concat(e));return{content:await n[t](),name:this.getReportNameFromHeader(n.headers)}},render:async function(e,t,n="",c="blob"){if(!e)throw new Error("Carbone SDK render error: the templateId argument is not valid.");if(!t)throw new Error("Carbone SDK render error: the data argument is not valid.");let i=null;if(typeof e=="string"&&e.length===64&&Object.prototype.hasOwnProperty.call(e,"name")===!1)i=await this.renderReport(e,t);else{let d=await(typeof e=="string"?e:await e.arrayBuffer().then(s=>new Uint8Array(s))),u=await this.generateTemplateId(d,n);if(u&&(i=await this.renderReport(u,t)),i===null||i.success===!1){let s=await this.addTemplate(e,n);if((s==null?void 0:s.success)===!0&&s.data.templateId)i=await this.renderReport(s.data.templateId,t);else throw new Error("Carbone Upload Template To Generate Document Error: "+(s==null?void 0:s.error))}}if(!i||i.success===!1||!i.data.renderId)throw new Error("Carbone Generate Document Error: "+(i==null?void 0:i.error));return this.getReport(i.data.renderId,c)},generateTemplateId:async function(e,t=""){function n(u){for(var s="",h=new DataView(u),p=0;p<h.byteLength;p+=4){var T=h.getUint32(p),D=T.toString(16),g="00000000",E=(g+D).slice(-g.length);s+=E}return s}var c=typeof e=="string"?new TextEncoder("utf-8").encode(e):e,i=typeof t=="string"?new TextEncoder("utf-8").encode(t):t,d=new Uint8Array(i.length+c.length);return d.set(i),d.set(c,i.length),await crypto.subtle.digest("SHA-256",d).then(function(u){return n(u)})},getReportNameFromHeader(e){if(!e)return null;let t=e.get("content-disposition");if(!t)return null;let n=t.split("=");if(n.length===1||!n[1])return null;let c=n[1];return c[0]==='"'&&c[c.length-1]==='"'&&(c=c.substr(1,n[1].length-2)),c}}};typeof window<"u"&&(window.carboneRenderSDK=w,window.carboneSDK=w);var V=w;
//# sourceMappingURL=main.js.map
